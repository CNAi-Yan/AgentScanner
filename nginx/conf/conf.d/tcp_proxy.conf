# TCP代理配置
# 示例：代理MySQL服务
stream {
    server {
        listen 3307;
        
        # 调用TCP认证Lua脚本
        access_by_lua_file /usr/local/nginx/lua/tcp_auth.lua;
        
        # 代理到MySQL服务器
        proxy_pass 127.0.0.1:3306;
        
        # 调用TCP日志Lua脚本
        log_by_lua_file /usr/local/nginx/lua/tcp_log.lua;
    }
    
    # 示例：代理Redis服务
    server {
        listen 6380;
        
        # 调用TCP认证Lua脚本
        access_by_lua_file /usr/local/nginx/lua/tcp_auth.lua;
        
        # 代理到Redis服务器
        proxy_pass 127.0.0.1:6379;
        
        # 调用TCP日志Lua脚本
        log_by_lua_file /usr/local/nginx/lua/tcp_log.lua;
    }
}