# UDP代理配置
# 示例：代理DNS服务
stream {
    server {
        listen 53 udp;
        
        # 调用UDP认证Lua脚本
        access_by_lua_file /usr/local/nginx/lua/udp_auth.lua;
        
        # 代理到DNS服务器
        proxy_pass 8.8.8.8:53;
        
        # UDP代理超时设置
        proxy_timeout 10s;
        
        # 调用UDP日志Lua脚本
        log_by_lua_file /usr/local/nginx/lua/udp_log.lua;
    }
    
    # 示例：代理Syslog服务
    server {
        listen 514 udp;
        
        # 调用UDP认证Lua脚本
        access_by_lua_file /usr/local/nginx/lua/udp_auth.lua;
        
        # 代理到Syslog服务器
        proxy_pass 127.0.0.1:5140;
        
        # UDP代理超时设置
        proxy_timeout 10s;
        
        # 调用UDP日志Lua脚本
        log_by_lua_file /usr/local/nginx/lua/udp_log.lua;
    }
}